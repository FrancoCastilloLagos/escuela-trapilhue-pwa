<header class="header-main" (click)="menuOpen = false; notifOpen = false">
  
  <div class="header-left-action">
    <button class="btn-back-nav" (click)="volverDashboard()">
      <span>‚¨Ö</span> VOLVER
    </button>
  </div>
  
  <div class="logo-wrapper">
    <div class="logo-white-bg">
      <img src="assets/logo-escuela.png" alt="Logo Escuela" class="img-logo">
    </div>
  </div>
  
  <div class="user-profile-pill" (click)="$event.stopPropagation()">
    
    <div class="notif-wrapper" *ngIf="!esDocente">
      <button class="notif-trigger-btn" (click)="toggleNotifications($event)">
        <span class="bell-icon">üîî</span>
        <span class="notif-badge" *ngIf="unreadCount > 0">{{ unreadCount }}</span>
      </button>
    </div>

    <span class="user-name-label">{{ userRol }}: {{ userName }}</span>
    
    <div style="position: relative;">
      <button class="menu-trigger" (click)="toggleMenu($event)">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      </button>
      
      <div class="dropdown-floating-menu" *ngIf="menuOpen">
        <button class="dropdown-item" (click)="irAConfig()">‚öôÔ∏è Configuraci√≥n</button>
        <div style="height: 1px; background: #eee; margin: 4px 0;"></div>
        <button class="dropdown-item" (click)="cerrarSesion()">üö™ Cerrar sesi√≥n</button>
      </div>
    </div>
  </div>

  <div class="dropdown-notif-box" *ngIf="notifOpen" (click)="$event.stopPropagation()">
    <div class="notif-header">√öLTIMOS AVISOS</div>
    <div class="notif-scroll">
      <div *ngIf="listaNotificaciones.length === 0" class="no-notif" style="padding: 30px; text-align: center; color: #ccc;">
        No hay mensajes nuevos
      </div>
      
      <div class="notif-row" *ngFor="let n of listaNotificaciones" [class.unread]="!n.leida">
        <div class="type-line" [attr.data-type]="n.tipo"></div>
        <div class="notif-data">
          <span class="n-tit">{{ n.titulo }}</span>
          <span class="n-msg">{{ n.mensaje }}</span>
          <span class="n-fec">{{ n.fecha | date:'dd/MM HH:mm' }}</span>
        </div>
      </div>
    </div>

    <div class="notif-footer" style="padding: 10px; background: #f9f9f9; border-top: 1px solid #eee;">
      <button (click)="notifOpen = false" style="width: 100%; background: #e74c3c; color: white; border: none; padding: 10px; border-radius: 10px; font-weight: 800; font-size: 0.75rem; cursor: pointer;">
        CERRAR NOTIFICACIONES
      </button>
    </div>
  </div>

</header>