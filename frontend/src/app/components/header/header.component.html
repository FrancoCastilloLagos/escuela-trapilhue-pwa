<header class="header-main" (click)="notifOpen = false; menuOpen = false">
  <div class="header-grid">
    
    <div class="header-section left">
      <button class="btn-volver" (click)="volverDashboard()">
        <span class="arrow">‚¨Ö</span> VOLVER
      </button>
    </div>
    
    <div class="header-section center">
      <div class="logo-circle">
        <img src="assets/logo-escuela.png" alt="Logo" class="logo-img">
      </div>
    </div>
    
    <div class="header-section right">
      <div class="user-pill">
        
        <div class="notif-container" *ngIf="!esDocente">
          <button class="bell-btn" (click)="toggleNotifications($event)">
            <span class="bell-icon">üîî</span>
            <span class="badge" *ngIf="unreadCount > 0">{{ unreadCount }}</span>
          </button>
        </div>

        <span class="user-text">{{ userRol }}: {{ userName }}</span>
        
        <button class="dots-btn" (click)="toggleMenu($event)">
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </button>

        <div class="dropdown-notif" *ngIf="notifOpen" (click)="$event.stopPropagation()">
          <div class="dropdown-header">NOTIFICACIONES</div>
          <div class="dropdown-scroll">
            <div *ngIf="listaNotificaciones.length === 0" class="empty-msg">No hay avisos</div>
            <div class="notif-item" *ngFor="let n of listaNotificaciones" [class.unread]="!n.leida">
              <div class="type-indicator" [attr.data-type]="n.tipo"></div>
              <div class="notif-content">
                <p class="n-title">{{ n.titulo }}</p>
                <p class="n-desc">{{ n.mensaje }}</p>
                <p class="n-date">{{ n.fecha | date:'dd/MM HH:mm' }}</p>
              </div>
            </div>
          </div>
        </div>

        <div class="dropdown-menu" *ngIf="menuOpen" (click)="$event.stopPropagation()">
          <button (click)="irAConfiguracion()">‚öôÔ∏è Configuraci√≥n</button>
          <button (click)="cerrarSesion()" class="btn-exit">üö™ Cerrar sesi√≥n</button>
        </div>

      </div>
    </div>

  </div>
</header>